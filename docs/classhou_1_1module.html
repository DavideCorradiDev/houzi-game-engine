<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Houzi Game Engine: hou::module&lt; Impl &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Houzi Game Engine
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classhou_1_1module.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classhou_1_1module-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">hou::module&lt; Impl &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Module initialization and termination manager.  
 <a href="classhou_1_1module.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="module_8hpp_source.html">module.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for hou::module&lt; Impl &gt;:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classhou_1_1module.png" usemap="#hou::module_3C_20Impl_20_3E_map" alt=""/>
  <map id="hou::module_3C_20Impl_20_3E_map" name="hou::module_3C_20Impl_20_3E_map">
<area href="classhou_1_1non__instantiable.html" title="Non instantiable class. " alt="hou::non_instantiable" shape="rect" coords="0,0,130,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a4966876e51e06511cb90301df1b2a4ad"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhou_1_1module.html#a4966876e51e06511cb90301df1b2a4ad">initialize</a> ()</td></tr>
<tr class="memdesc:a4966876e51e06511cb90301df1b2a4ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the module.  <a href="#a4966876e51e06511cb90301df1b2a4ad">More...</a><br /></td></tr>
<tr class="separator:a4966876e51e06511cb90301df1b2a4ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fd1a72adf65e5be6c974c119459c2a1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhou_1_1module.html#a2fd1a72adf65e5be6c974c119459c2a1">terminate</a> () noexcept</td></tr>
<tr class="memdesc:a2fd1a72adf65e5be6c974c119459c2a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Terminates the module.  <a href="#a2fd1a72adf65e5be6c974c119459c2a1">More...</a><br /></td></tr>
<tr class="separator:a2fd1a72adf65e5be6c974c119459c2a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a554e0949efac8e2e278ea090f403b05e"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhou_1_1module.html#a554e0949efac8e2e278ea090f403b05e">is_initialized</a> () noexcept</td></tr>
<tr class="memdesc:a554e0949efac8e2e278ea090f403b05e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the module has already been initialized.  <a href="#a554e0949efac8e2e278ea090f403b05e">More...</a><br /></td></tr>
<tr class="separator:a554e0949efac8e2e278ea090f403b05e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename Impl&gt;<br />
class hou::module&lt; Impl &gt;</h3>

<p>Module initialization and termination manager. </p>
<p>This class is used as the base to create static classes responsible for the initialization and termination of global state connected to a library module.</p>
<p>Operative systems are normally capable of freeing resources after a simple program termination, but some modules might change global system settings that would not be restored automatically.</p>
<p>The class must be given an implementation Impl as template parameter. Impl must define two static methods with the following signature: </p><div class="fragment"><div class="line"><span class="keywordtype">bool</span> on_initialize();</div><div class="line"><span class="keywordtype">void</span> on_terminate() noexcept;</div></div><!-- fragment --><p>on_initialize will be called when calling initialize, on_terminate will be called when calling terminate.</p>
<p>on_initialize should return true in case of a successful initialization, or false in case if error. In both cases, on_initialize must leave the program in a consistent state.</p>
<p>on_terminate is not allowed to fail. It must always correctly restore the state as it was before the call to on_initialize.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Impl</td><td>implementation for a specific module. </td></tr>
  </table>
  </dd>
</dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a4966876e51e06511cb90301df1b2a4ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4966876e51e06511cb90301df1b2a4ad">&#9670;&nbsp;</a></span>initialize()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Impl &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classhou_1_1module.html">hou::module</a>&lt; Impl &gt;::initialize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initializes the module. </p>
<p>If the module is not initialized, it internally calls Impl::on_initialize() and returns its return value.</p>
<p>If the module is already initialized, it immediately returns true.</p>
<p>This function is not thread-safe. It should be called only by the main thread (and should normally be sufficient to just call it once).</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classhou_1_1module__initialization__error.html" title="Module initialization error. ">hou::module_initialization_error</a></td><td>in case of an error.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the module is initialized after the call, false otherwise. </dd></dl>

</div>
</div>
<a id="a554e0949efac8e2e278ea090f403b05e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a554e0949efac8e2e278ea090f403b05e">&#9670;&nbsp;</a></span>is_initialized()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Impl &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classhou_1_1module.html">hou::module</a>&lt; Impl &gt;::is_initialized </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if the module has already been initialized. </p>
<dl class="section return"><dt>Returns</dt><dd>true if the module is initialized, false otherwise. </dd></dl>

</div>
</div>
<a id="a2fd1a72adf65e5be6c974c119459c2a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fd1a72adf65e5be6c974c119459c2a1">&#9670;&nbsp;</a></span>terminate()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Impl &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classhou_1_1module.html">hou::module</a>&lt; Impl &gt;::terminate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Terminates the module. </p>
<p>If the module is not initialized or was alredy terminated, this function does nothing.</p>
<p>If the module is initialized, it internally calls Impl::on_terminate();</p>
<p>This function is not thread-safe. It should be called only by the main thread (and should normally be sufficient to just call it once at program exit).</p>
<p>When the module is first initializing, an exit callback calling terminate is automatically registered, meaning that you don't need to explicitly call this function. You may still do it if you wish to terminate the module beforehand for some reason.</p>
<dl class="section note"><dt>Note</dt><dd>signal handlers will normally not call the exit callbacks by default. This means that if the application terminates as a consequence to a call to a signal handler, proper termination will not be performed. You may provide custom callbacks with std::signal, but there are strong constraints on what can be done in such function. As a general rule module termination functions can't be safely called from inside a signal callback, therefore there is no way to ensure proper cleanup when responding to a signal.</dd>
<dd>
std::abort kills the application by rasing the SIGABRT signal. This means that calling std::abort will not ensure proper module cleanup. For this reason, avoid calling std::abort and prefer std::exit or std::quick_exit instead. Note that if exceptions are disabled, they are disabled also in the STL. STL classes will then call std::abort instead of throwing exceptions, meaning that error generating from STL classes might result in incomplete cleanup.</dd>
<dd>
calls to std::terminate will by default call std::abort, and will therefore bypass these callbacks. It is advised to wrap the whole main function in a try-catch block in order to ensure a normal exit when an exception is not handled. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>source/houcor/include/hou/cor/<a class="el" href="module_8hpp_source.html">module.hpp</a></li>
<li>source/houcor/include/hou/cor/module.inl</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacehou.html">hou</a></li><li class="navelem"><a class="el" href="classhou_1_1module.html">module</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
